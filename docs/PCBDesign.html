

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PCB Design &mdash; Victoria Makerspace  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Firmware" href="Firmware.html" />
    <link rel="prev" title="Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Victoria Makerspace
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PCB Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#learning-pcb-design">Learning PCB Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kicad-project-files">kiCAD Project Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ac-creepage-and-clearance-considerations">AC creepage and clearance considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#determining-creepage-spacing">Determining creepage spacing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bom">BOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bodge-gallery">Bodge Gallery</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Firmware.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="tasknTimer.html">RTOS Tasks and Timers Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="MFRC522.html">RFID Module - A Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assembly.html">Assembly</a></li>
<li class="toctree-l1"><a class="reference internal" href="futureDevelopment.html">Roadmap to Further Development</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Victoria Makerspace</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>PCB Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/PCBDesign.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pcb-design">
<h1>PCB Design<a class="headerlink" href="#pcb-design" title="Permalink to this headline">¶</a></h1>
<div class="figure align-center" id="id1">
<img alt="_images/Rev02PCB.jpg" src="_images/Rev02PCB.jpg" />
<p class="caption"><span class="caption-text">Second physical revision of the tool access PCB (derived from toolAccess100Hx100WRev06).</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Designed in: <a class="reference external" href="https://kicad-pcb.org/">kiCAD</a></p>
<div class="section" id="learning-pcb-design">
<h2>Learning PCB Design<a class="headerlink" href="#learning-pcb-design" title="Permalink to this headline">¶</a></h2>
<p>For those interested in learning to design their own PCBs. These are the resources I utilized during my co-op. They are focused on PCB design and PCB CAD tools not circuit theory.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=vaCVh2SAZY4/i">Digi-Key’s Intro to kiCAD:</a> this series alone taught me kiCAD. A heads up the version you use will likely be different. If an icon isn’t where it appears in the video look in the comments for the new location.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=w_7iRCyau7w">Importing custom graphics into kiCAD</a> - If you want to fancy up your boards.</p></li>
<li><p><a class="reference external" href="https://www.4pcb.com/trace-width-calculator.html">PCB Trace Width Calculator</a> - To help with determine trace sizes.</p></li>
<li><p><a class="reference external" href="https://www.snapeda.com/">SnapEDA</a> - Free symbol, footprint, and 3D model files</p></li>
</ul>
</div>
<div class="section" id="kicad-project-files">
<h2>kiCAD Project Files<a class="headerlink" href="#kicad-project-files" title="Permalink to this headline">¶</a></h2>
<p>This section contain all of the PCB design file made by myself (Liam Brinston) during my co-op term in the summer of 2020.</p>
<p>The have been broken out into project files of various sizes depending on what level of interest you may have.</p>
<p>Download the files, unzip them into your desired working directory, and then open the toolAccess.pro file from kiCAD &gt; File &gt; Open Project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For either set of project files there are two sets of footprints and symbols that must be added to your kiCAD library paths:</p>
<ol class="arabic simple">
<li><p>Footprints made for this project - found in the toolAccess.pretty folder.</p></li>
<li><p>Footprints and symbols libraries I acquired via SnapEDA - found in the libraries folder.</p></li>
</ol>
<p>It should be noted that the SPADE_TERMINAL_6.3MM.kicad_model files for the spade terminal (aka. FastOn) were modified by the author to include surface mount
solder pads in addition to through holes for additional rigidity.</p>
</div>
<p><strong>Most recent kiCAD Project files:</strong>
<a class="reference download internal" download="" href="_downloads/9d4ecbe3e901cb986e9231e83a601e68/toolAccessPrjMaster.zip"><code class="xref download docutils literal notranslate"><span class="pre">toolAccessPrjMaster.zip</span></code></a></p>
<p>These files are the most recent revision of the project used to produce the second iteration of the physical tool access prototype. Includes gerbers and drill files.</p>
<p><strong>Gerbers and drill files for most recent deisgn :</strong>
<a class="reference download internal" download="" href="_downloads/86189cf6297cb98e53e992dfb93e6802/toolAccessMasterGerbers.zip"><code class="xref download docutils literal notranslate"><span class="pre">toolAcessMasterGerbers</span></code></a></p>
<p>Just the gerbers and drill files for the most recent revision of the PCB.</p>
<p><strong>Complete Co-op 2020 kiCAD Project files:</strong>
<a class="reference download internal" download="" href="_downloads/05b183caeee5acd69958610784d2b39c/toolAccessPrjComplete.zip"><code class="xref download docutils literal notranslate"><span class="pre">toolAccessPrjComplete.zip</span></code></a></p>
<p>The project file contains all of the revisions made by myself (Liam Brinston) during my co-op term in the summer of 2020. They are not all complete, some are merely part layouts while others are totally traced out. I have included this complete project file should it prove necessary to understand how the final design was arrived at.</p>
<p>As this project is much larger with more revisions the file inheritance in the project can be referenced according to this diagram:</p>
<div class="figure align-center" id="id2">
<img alt="_images/kiCADInheritance.png" src="_images/kiCADInheritance.png" />
<p class="caption"><span class="caption-text">Inheritance diagram for the complete kiCAD project files. Showing which PCBNew files inherit from which eeSchema files via the netlist file.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Makerspace Silkscreen Logo:</strong>
<a class="reference download internal" download="" href="_downloads/6fa79751262daf7e369fe06fb6d0d55a/makerSpaceSilkLogo.zip"><code class="xref download docutils literal notranslate"><span class="pre">makerSpaceSilkLogo.zip</span></code></a></p>
</div>
<div class="section" id="ac-creepage-and-clearance-considerations">
<h2>AC creepage and clearance considerations<a class="headerlink" href="#ac-creepage-and-clearance-considerations" title="Permalink to this headline">¶</a></h2>
<p>Useful technical documentation:
| <a class="reference external" href="https://resources.altium.com/p/high-voltage-pcb-design-creepage-and-clearance-distance">High Voltage PCB Design Creepage and Clearance Distance</a>
| <a class="reference external" href="https://www.4pcb.com/trace-width-calculator.html">Advanced Circuits PCB trace width calculator</a>
| <a class="reference external" href="https://www.smps.us/pcbtracespacing.html">Creepage calculator</a>
| <a class="reference external" href="https://www.autodesk.com/products/eagle/blog/8-pcb-grounding-rules/">Grounding considerations</a>
| <a class="reference external" href="https://db-electronic.com/en/pcb-manufacturing_s56.htm">CTI and PTI</a>
| <a class="reference external" href="https://en.wikipedia.org/wiki/Comparative_Tracking_Index">CTI Wikipedia page</a></p>
<p>Clearance - is the shortest distance through air between two conductors. Environmental conditions have a significant effect on this, primarily humidity changes.</p>
<p>Creepage - measures distances between two conductors along the surface of a high voltage PCB.  This requirement varies with the material of your PCB and can be increaed by slotting or routing air gaps between parts.</p>
<p>Our circuit has a small number of high voltage AC traces. Namely the spade terminals where AC power comes onto the boards, our HiLink Mains to 5V PSU,
the protection circuitry for the PSU, and the relay contactor pins. These traces will operate at either 120V or 240V depending on the tool being controlled
(the HiLink is capable of stepping down both).</p>
</div>
<div class="section" id="determining-creepage-spacing">
<h2>Determining creepage spacing<a class="headerlink" href="#determining-creepage-spacing" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Pollution degree</strong>: Degree 1 - our circuit will be enclosed, dust proof, and indoors therefore falls under only dry non-conductive however, the fabrication shop does get very cold in the winter and can experience temperature swings over the course of the day so condensation is a possibility.</p></li>
<li><p><strong>PCB material</strong>: FR4</p></li>
<li><p><strong>FR4 CTI</strong>: 175 therefore material group IIIb.</p></li>
<li><p><strong>Max current (Signal lines)</strong>: 40mA DC (ESP32 GPIO limit).</p></li>
<li><p><strong>Max current (5V lines)</strong>: 1A (DC limit of our PSU).</p></li>
<li><p><strong>Max current (AC lines)</strong>: 0.5A (AC limit of our PSU/Fuse threshold).</p></li>
</ul>
<p>Given that our system could have either 120V or 240V supply we must plan for clearance and creepage at 240V. Additionally although our deployment mostly falls under pollution degree 1 using the spacing recommendations for spacing level 3 (where possible) will help us guard against edge cases.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="_images/clearCalc.png"><img alt="visual representation of clearance vs creepage discussed above" src="_images/clearCalc.png" style="width: 259.2px; height: 249.60000000000002px;" /></a>
<p class="caption"><span class="caption-text">Clearance calculation at 240V
Source: <a class="reference external" href="https://www.smps.us/pcbtracespacing.html">Lazar’s PCB Design Guide - Clearance</a></span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/creepCalc.png"><img alt="visual representation of clearance vs creepage discussed above" src="_images/creepCalc.png" style="width: 413.6px; height: 173.60000000000002px;" /></a>
<p class="caption"><span class="caption-text">Creepage calculation at 240V pollution degree 1 and 3
Source: <a class="reference external" href="https://pcbdesign.smps.us/creepage.html">Lazar’s PCB Design Guide - Creepage</a>
Units: mm.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>With these numbers in mind all AC traces were kept &gt;1.25mm clear of one another and 5mm slots were routed between the high voltage AC side of the board and the
low voltage DC side to achieve creepage distances of &gt;4mm. Additionally all AC traces were excluded from the ground plane of the board.</p>
</div>
<div class="section" id="bom">
<h2>BOM<a class="headerlink" href="#bom" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="bodge-gallery">
<h2>Bodge Gallery<a class="headerlink" href="#bodge-gallery" title="Permalink to this headline">¶</a></h2>
<p>Mistakes are part of prototyping. Humor and joy can be found in trying to fix these mistakes after the fact. So please enjoy this small gallery of design screw-ups
and after the fact repairs made in the course of this project.</p>
<p><strong>Prototype 1</strong></p>
<div class="figure align-center" id="id5">
<img alt="_images/relayMirror.jpg" src="_images/relayMirror.jpg" />
<p class="caption"><span class="caption-text">I was so focused on making sure I didn’t accidentally mirror the header placement for the RFID module I accidentally mirrored the footprint for the relay when I made
it. Fortunately the placement of the AC pins wasn’t so drastically different I couldn’t correct for this with a rotary tool. It also helps that the board mount pins
are soldered for mechanical strength only.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id6">
<img alt="_images/protoT1Bodge.jpg" src="_images/protoT1Bodge.jpg" />
<p class="caption"><span class="caption-text">I initially used the footprint for the smaller 5V 600mA HiLink board mount PSU without realizing. This mistake required a less subtle fix due to major difference in
dimensions between the two models.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Prototype 2</strong></p>
<div class="figure align-center" id="id7">
<img alt="_images/SDAShort.png" src="_images/SDAShort.png" />
<p class="caption"><span class="caption-text">Uncaught error in the kiCAD file (now fixed) causing the connection between the RFID modules SDA pin and the ESP32’s pin 21 to short to ground. Surprisingly the
un-circled trace isn’t shorted to ground but was none the less moved further for the ground pad in the next revision.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>Fortunately this design error was easily corrected by severing the trace either side of the short and soldering a a wire from the SDA pin to pin 21.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Firmware.html" class="btn btn-neutral float-right" title="Firmware" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Liam Brinston

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>